(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6d39"],{"0653":function(t,e,a){"use strict";a("68ef")},"1a56":function(t,e,a){"use strict";var n=a("b65e"),i=a.n(n);i.a},"34e9":function(t,e,a){"use strict";var n=a("2638"),i=a.n(n),r=a("a142"),l=a("ba31"),s=Object(r["j"])("cell-group"),o=s[0],c=s[1];function u(t,e,a,n){var r=t("div",i()([{class:[c(),{"van-hairline--top-bottom":e.border}]},Object(l["b"])(n,!0)]),[a["default"]&&a["default"]()]);return e.title?t("div",[t("div",{class:c("title")},[e.title]),r]):r}u.props={title:String,border:{type:Boolean,default:!0}},e["a"]=o(u)},"4d48":function(t,e,a){"use strict";a("68ef"),a("bf60")},5715:function(t,e,a){},"66b9":function(t,e,a){"use strict";a("68ef")},7744:function(t,e,a){"use strict";var n=a("c31d"),i=a("2638"),r=a.n(i),l=a("a142"),s=a("dfaf"),o=a("ba31"),c=a("48f4"),u=a("ad06"),d=Object(l["j"])("cell"),f=d[0],p=d[1];function m(t,e,a,n){var i=e.icon,s=e.size,d=e.title,f=e.label,m=e.value,b=e.isLink,v=e.arrowDirection,y=a.title||Object(l["c"])(d),g=a["default"]||Object(l["c"])(m),h=a.label||Object(l["c"])(f),_=h&&t("div",{class:[p("label"),e.labelClass]},[a.label?a.label():f]),w=y&&t("div",{class:[p("title"),e.titleClass],style:e.titleStyle},[a.title?a.title():t("span",[d]),_]),q=g&&t("div",{class:[p("value",{alone:!a.title&&!d}),e.valueClass]},[a["default"]?a["default"]():t("span",[m])]),j=a.icon?a.icon():i&&t(u["a"],{class:p("left-icon"),attrs:{name:i}}),O=a["right-icon"],S=O?O():b&&t(u["a"],{class:p("right-icon"),attrs:{name:v?"arrow-"+v:"arrow"}}),x=function(t){Object(o["a"])(n,"click",t),Object(c["a"])(n)},C={center:e.center,required:e.required,borderless:!e.border,clickable:b||e.clickable};return s&&(C[s]=s),t("div",r()([{class:p(C),on:{click:x}},Object(o["b"])(n)]),[j,w,q,S,a.extra&&a.extra()])}m.props=Object(n["a"])({},s["a"],c["c"],{clickable:Boolean,arrowDirection:String}),e["a"]=f(m)},"7b0a":function(t,e,a){},"81e6":function(t,e,a){"use strict";a("68ef"),a("7b0a")},"84b4":function(t,e,a){var n=a("5ca1");n(n.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}})},"9ffb":function(t,e,a){"use strict";var n=a("a142"),i=Object(n["j"])("col"),r=i[0],l=i[1];e["a"]=r({props:{span:[Number,String],offset:[Number,String],tag:{type:String,default:"div"}},computed:{gutter:function(){return this.$parent&&Number(this.$parent.gutter)||0},style:function(){var t=this.gutter/2+"px";return this.gutter?{paddingLeft:t,paddingRight:t}:{}}},render:function(t){var e,a=this.span,n=this.offset;return t(this.tag,{class:l((e={},e[a]=a,e["offset-"+n]=n,e)),style:this.style},[this.slots()])}})},b65e:function(t,e,a){},b798:function(t,e,a){"use strict";var n=a("5715"),i=a.n(n);i.a},bf60:function(t,e,a){},c194:function(t,e,a){"use strict";a("68ef")},c481:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.qrcode?a("div",{staticClass:"paycode"},[a("van-row",{staticClass:"text-center m-top20"},[a("div",{staticClass:"m-top10"},[a("div",{staticClass:"icon"},[a("i",{staticClass:"iconfont icon-xinshoulibao color-red"})]),"0"==t.qrcode.type?a("span",{staticClass:"f-04"},[t._v(t._s(t.seller))]):a("span",{staticClass:"m-top20 price-title"},[t._v(t._s(t.currency)+t._s(t.qrcode.amount))])])]),"1"==t.qrcode.type?a("van-row",{staticClass:"m-top20 f-05"},[a("van-cell-group",[a("van-cell",{attrs:{title:t.$t("lang.label_collection_reason")}},[t._v(t._s(t.qrcode.qrpay_name))])],1)],1):a("van-row",{staticClass:"m-top20"},[a("van-cell-group",[a("van-cell",{attrs:{title:t.$t("lang.payment_amount"),icon:"edit"}}),a("currency-input",{attrs:{type:"tel"},model:{value:t.qrcode.amount,callback:function(e){t.$set(t.qrcode,"amount",e)},expression:"qrcode.amount"}})],1)],1),a("van-row",{staticClass:"m-top20"},[a("van-col",{attrs:{offset:"2",span:"20"}},[a("van-button",{attrs:{type:"primary",block:""},on:{click:t.doPay}},[t._v(t._s(t.$t("lang.immediate_pay")))])],1)],1)],1):t._e()},i=[],r=(a("e7e5"),a("d399")),l=(a("a481"),a("88d8")),s=(a("66b9"),a("b650")),o=(a("81e6"),a("9ffb")),c=(a("4d48"),a("d1e1")),u=(a("0653"),a("34e9")),d=(a("7f7f"),a("c194"),a("7744")),f=(a("2f62"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"currency"},[t.label?a("label",[t._v(t._s(t.label))]):t._e(),a("input",{ref:"input",class:{gray:t.isGray},attrs:{maxlength:"7",autocomplete:"off"},domProps:{value:t.value},on:{input:function(e){t.updateValue(e.target.value)},focus:t.selectAll,blur:t.formatValue}})])}),p=[],m=(a("c5f6"),a("84b4"),{format:function(t){return(Math.trunc(1e12*t)/1e12).toFixed(2)},parse:function(t,e){var a=function(t){return{value:t}},n=function(e,a){return{warning:e,value:a,attempt:t}},i=function(e){return new n(t+" is not a valid dollar amount",e)},r=function(e){return new n(t+" was automatically converted to "+e,e)},l=Number(t),s=t.indexOf("."),o=t.indexOf("e");if(isNaN(l))return-1===s&&o>0&&o===t.length-1&&0!==Number(t.slice(0,o))?new a(e):new i(e);var c=m.format(l),u=Number(c);return u===l?-1!==o&&o===t.length-2?new r(l):new a(l):new i(l>u?u:e)}}),b=m,v={name:"currency",props:{value:{type:Number,default:0},label:{type:String,default:"₸"},isGray:{type:Boolean,default:!0},isReadonly:{type:Boolean,default:!1}},mounted:function(){this.formatValue()},methods:{updateValue:function(t){var e=b.parse(t,this.value);this.$emit("update:updateGray",0===e.value),e.warning&&(this.$refs.input.value=e.value),e.value=e.value>=1e4?9999.99:e.value,this.$emit("input",e.value)},formatValue:function(){this.$refs.input.value=b.format(this.value)},selectAll:function(t){setTimeout(function(){t.target.select()},0)}}},y=v,g=(a("b798"),a("2877")),h=Object(g["a"])(y,f,p,!1,null,"61238914",null);h.options.__file="Currency.vue";var _,w=h.exports,q=a("4328"),j=a.n(q),O=a("bc3a"),S=a.n(O),x=a("09d6"),C={name:"qrpay",minxins:[x["a"]],components:(_={"currency-input":w},Object(l["a"])(_,d["a"].name,d["a"]),Object(l["a"])(_,u["a"].name,u["a"]),Object(l["a"])(_,c["a"].name,c["a"]),Object(l["a"])(_,o["a"].name,o["a"]),Object(l["a"])(_,s["a"].name,s["a"]),_),data:function(){return{currency:"￥",seller:"",locked:!1,qrpay_id:0,isGray:!0,isReadonly:!1,qrcode:""}},created:function(){var t=JSON.parse(sessionStorage.getItem("configData"));t&&(this.currency=t.currency_format.replace("%s","")),this.qrpay_id=this.$route.query.id||0,x["a"].isWeixinBrowser()?this.isLogin?this.getQrcodeDetail(this.qrpay_id):this.$router.push({path:"/login",query:{redirect:{name:"qrpay",params:{id:this.qrpay_id}}}}):this.getQrcodeDetail(this.qrpay_id)},computed:{isLogin:function(){return null!=localStorage.getItem("token")}},methods:{doPay:function(){var t=this,e=parseFloat(t.qrcode.amount);isNaN(e)||0==e?Object(r["a"])({message:this.$t("lang.enter_pay_in_balance"),forbidClick:!0}):0==t.locked&&(t.locked=!0,S.a.post("".concat(window.ROOT_URL,"api/qrpay/pay"),j.a.stringify({id:t.qrpay_id,amount:t.qrcode.amount,_ajax:1})).then(function(e){t.locked=!1;var a=e.data;a.error>0&&alert(a.message),"alipay"==a.data.paycode?window.location.href=a.data.payment:"wxpay"==a.data.paycode&&t.callpay(JSON.parse(a.data.payment))}).catch(function(t){}))},getQrcodeDetail:function(t){var e=this;S.a.get("".concat(window.ROOT_URL,"api/qrpay?id=")+parseInt(t),{params:{_ajax:1}}).then(function(t){var a=t.data;a.error>0&&alert(a.message),e.seller=a.data.seller,e.qrcode=a.data.qrcode,document.title=e.qrcode.qrpay_name}).catch(function(t){})},jsApiCall:function(t){var e=this;WeixinJSBridge.invoke("getBrandWCPayRequest",t,function(t){"get_brand_wcpay_request:ok"==t.err_msg?window.location.href=window.ROOT_URL+"/mobile#/respond?type=qrpay&status=1&id="+e.qrpay_id:window.location.href=window.ROOT_URL+"/mobile#/respond?type=qrpay&status=0&id="+e.qrpay_id})},callpay:function(t){"undefined"==typeof WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",this.jsApiCall(t),!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",this.jsApiCall(t)),document.attachEvent("onWeixinJSBridgeReady",this.jsApiCall(t))):this.jsApiCall(t)}}},k=C,N=(a("1a56"),Object(g["a"])(k,n,i,!1,null,"64f15fbe",null));N.options.__file="Qrpay.vue";e["default"]=N.exports},d1e1:function(t,e,a){"use strict";var n=a("a142"),i=Object(n["j"])("row"),r=i[0],l=i[1];e["a"]=r({props:{type:String,align:String,justify:String,tag:{type:String,default:"div"},gutter:{type:[Number,String],default:0}},render:function(t){var e,a=this.align,n=this.justify,i="flex"===this.type,r="-"+Number(this.gutter)/2+"px",s=this.gutter?{marginLeft:r,marginRight:r}:{};return t(this.tag,{style:s,class:l((e={flex:i},e["align-"+a]=i&&a,e["justify-"+n]=i&&n,e))},[this.slots()])}})},dfaf:function(t,e,a){"use strict";a.d(e,"a",function(){return n});var n={icon:String,size:String,center:Boolean,isLink:Boolean,required:Boolean,titleStyle:null,titleClass:null,valueClass:null,labelClass:null,title:[String,Number],value:[String,Number],label:[String,Number],border:{type:Boolean,default:!0}}}}]);