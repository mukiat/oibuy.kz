(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d97"],{2994:function(t,i,s){"use strict";s("68ef"),s("c0c2")},"2bdd":function(t,i,s){"use strict";var e=s("a142"),o=s("543e"),a=s("db78"),n=s("023d"),c=Object(e["j"])("list"),r=c[0],l=c[1],h=c[2];i["a"]=r({model:{prop:"loading"},props:{error:Boolean,loading:Boolean,finished:Boolean,errorText:String,loadingText:String,finishedText:String,immediateCheck:{type:Boolean,default:!0},offset:{type:Number,default:300},direction:{type:String,default:"down"}},mounted:function(){this.scroller=Object(n["c"])(this.$el),this.handler(!0),this.immediateCheck&&this.$nextTick(this.check)},destroyed:function(){this.handler(!1)},activated:function(){this.handler(!0)},deactivated:function(){this.handler(!1)},watch:{loading:function(){this.$nextTick(this.check)},finished:function(){this.$nextTick(this.check)}},methods:{check:function(){if(!(this.loading||this.finished||this.error)){var t=this.$el,i=this.scroller,s=Object(n["e"])(i);if(s&&"none"!==window.getComputedStyle(t).display&&null!==t.offsetParent){var e=this.offset,o=this.direction;a()&&(this.$emit("input",!0),this.$emit("load"))}}function a(){if(t===i){var a=Object(n["d"])(t);if("up"===o)return a<=e;var c=a+s;return i.scrollHeight-c<=e}if("up"===o)return Object(n["d"])(i)-Object(n["a"])(t)<=e;var r=Object(n["a"])(t)+Object(n["e"])(t)-Object(n["a"])(i);return r-s<=e}},clickErrorText:function(){this.$emit("update:error",!1),this.$nextTick(this.check)},handler:function(t){this.binded!==t&&(this.binded=t,(t?a["b"]:a["a"])(this.scroller,"scroll",this.check))}},render:function(t){return t("div",{class:l()},["down"===this.direction&&this.slots(),this.loading&&t("div",{class:l("loading"),key:"loading"},[this.slots("loading")||[t(o["a"],{class:l("loading-icon")}),t("span",{class:l("loading-text")},[this.loadingText||h("loading")])]]),this.finished&&this.finishedText&&t("div",{class:l("finished-text")},[this.finishedText]),this.error&&this.errorText&&t("div",{on:{click:this.clickErrorText},class:l("error-text")},[this.errorText]),"up"===this.direction&&this.slots()])}})},5455:function(t,i,s){},5487:function(t,i,s){"use strict";var e=s("db78"),o=s("023d"),a="@@Waterfall",n=300;function c(){var t=this.el,i=this.scrollEventTarget;if(!this.disabled){var s=Object(o["d"])(i),e=Object(o["e"])(i),a=s+e;if(e){var n=!1;if(t===i)n=i.scrollHeight-a<this.offset;else{var c=Object(o["a"])(t)-Object(o["a"])(i)+Object(o["e"])(t);n=c-e<this.offset}n&&this.cb.lower&&this.cb.lower({target:i,top:s});var r=!1;if(t===i)r=s<this.offset;else{var l=Object(o["a"])(t)-Object(o["a"])(i);r=l+this.offset>0}r&&this.cb.upper&&this.cb.upper({target:i,top:s})}}}function r(){var t=this;if(!this.el[a].binded){this.el[a].binded=!0,this.scrollEventListener=c.bind(this),this.scrollEventTarget=Object(o["c"])(this.el);var i=this.el.getAttribute("waterfall-disabled"),s=!1;i&&(this.vm.$watch(i,function(i){t.disabled=i,t.scrollEventListener()}),s=Boolean(this.vm[i])),this.disabled=s;var r=this.el.getAttribute("waterfall-offset");this.offset=Number(r)||n,Object(e["b"])(this.scrollEventTarget,"scroll",this.scrollEventListener,!0),this.scrollEventListener()}}function l(t){var i=t[a];i.vm.$nextTick(function(){r.call(t[a])})}function h(t){var i=t[a];i.vm._isMounted?l(t):i.vm.$on("hook:mounted",function(){l(t)})}var d=function(t){return{bind:function(i,s,e){i[a]||(i[a]={el:i,vm:e.context,cb:{}}),i[a].cb[t]=s.value,h(i)},update:function(t){var i=t[a];i.scrollEventListener&&i.scrollEventListener()},unbind:function(t){var i=t[a];i.scrollEventTarget&&Object(e["a"])(i.scrollEventTarget,"scroll",i.scrollEventListener)}}};d.install=function(t){t.directive("WaterfallLower",d("lower")),t.directive("WaterfallUpper",d("upper"))};i["a"]=d},ac1e:function(t,i,s){"use strict";s("68ef")},c0c2:function(t,i,s){},d49c:function(t,i,s){"use strict";s("68ef")},d9e6:function(t,i,s){t.exports=s.p+"img/no_image.jpg"},f55e:function(t,i,s){"use strict";s.r(i);var e,o=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"shop_container"},[e("div",{staticClass:"shopping_menu flex_box"},[e("div",{staticClass:"shopping_menu_left flex_box jc_sa ai_center"},[e("div",{staticClass:"item",class:{active:"sort"==t.sort},on:{click:function(i){t.filterHandle("hot")}}},[e("span",{staticClass:"size_15 weight_700"},[t._v(t._s(t.$t("lang.hot_alt")))]),e("i",{staticClass:"iconfont color_ccc",class:["DESC"==t.order&&"sort"==t.sort?"icon-topjiantou":"icon-xiajiantou"]})]),e("div",{staticClass:"item",class:{active:t.regionOptionDate.city.id>0},on:{click:function(i){t.filterHandle("region")}}},[e("span",{staticClass:"size_15 weight_700"},[t._v(t._s(t.$t("lang.region")))]),e("i",{staticClass:"iconfont color_ccc icon-xiajiantou"})]),t.isWeixinBrowser?e("div",{staticClass:"item",class:{active:"distance"==t.sort},on:{click:function(i){t.filterHandle("distance")}}},[e("span",{staticClass:"size_15 weight_700"},[t._v(t._s(t.$t("lang.distance")))]),e("i",{staticClass:"iconfont color_ccc",class:["DESC"==t.order&&"distance"==t.sort?"icon-topjiantou":"icon-xiajiantou"]})]):t._e()]),e("div",{staticClass:"shopping_menu_right flex_box ai_center"},[e("div",{staticClass:"search_container flex_box ai_center"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],staticClass:"size_15",attrs:{type:"text",placeholder:t.$t("lang.search_the_store")},domProps:{value:t.keyword},on:{input:function(i){i.target.composing||(t.keyword=i.target.value)}}}),e("div",{on:{click:t.searchTheStore}},[e("i",{staticClass:"iconfont icon-home-search size_13"})])])])]),t.shopCatList.length>0?e("div",{staticClass:"dsc_shop_nav"},[e("swiper",{ref:"mySwiper",staticClass:"scroll_view",attrs:{options:t.swiperOption}},[e("swiper-slide",{staticClass:"scroll_view_item"},[e("a",{class:{active:0==t.cat_id},attrs:{href:"javascript:;"},on:{click:function(i){t.shopCatClick(0)}}},[e("div",{staticClass:"icon"},[e("i",{staticClass:"iconfont icon-fenlei"})]),e("h5",{staticClass:"name text_1 size_12"},[t._v(t._s(t.$t("lang.all_categories")))])])]),t._l(t.shopCatList,function(i,o){return e("swiper-slide",{key:o,staticClass:"scroll_view_item"},[e("a",{class:{active:t.cat_id==i.cat_id},attrs:{href:"javascript:void(0)"},on:{click:function(s){t.shopCatClick(i.cat_id)}}},[e("div",{staticClass:"icon"},[i.cat_icon?e("img",{staticClass:"img",attrs:{src:i.touch_icon}}):e("img",{staticClass:"img",attrs:{src:s("d9e6"),alt:""}})]),e("h5",{staticClass:"name text_1 size_12"},[t._v(t._s(i.cat_alias_name))])])])})],2)],1):t._e(),e("div",{directives:[{name:"waterfall-lower",rawName:"v-waterfall-lower",value:t.loadMores,expression:"loadMores"}],staticClass:"store_info",attrs:{"waterfall-disabled":"disabled","waterfall-offset":"400"}},[t._l(t.shopList,function(i,o){return e("div",{key:o,staticClass:"store_list"},[e("header",{staticClass:"header flex_box ai_center jc_sb"},[e("div",{staticClass:"header_left flex_box ai_center",on:{click:function(s){t.shopDetail(i.user_id)}}},[e("div",{staticClass:"img_box"},[e("img",{attrs:{src:i.logo_thumb}})]),e("div",{staticClass:"shop_name_box"},[e("h3",{staticClass:"size_15 color_000 weight_700 text_1"},[t._v(t._s(i.rz_shop_name))]),e("p",{staticClass:"size_12 color_666"},[t._v("\n              "+t._s(t.$t("lang.collection_one"))+"\n              "),e("span",[t._v(t._s(i.count_gaze))]),t._v("\n              "+t._s(t.$t("lang.collection_two"))+"\n            ")]),t.isWeixinBrowser?e("p",{staticClass:"size_12 color_666",staticStyle:{"margin-top":"2px"}},[t._v(t._s(t.$t("lang.distance"))),e("span",{staticClass:"color_FD001C"},[t._v(" "+t._s(i.distance.value)+t._s(i.distance.unit)+" ")])]):t._e()])]),e("div",{staticClass:"header_right"},[e("div",{staticClass:"shop_in size_12 color_fff",on:{click:function(s){t.shopDetail(i.user_id)}}},[t._v(t._s(t.$t("lang.into_shop")))]),e("div",{class:[1==i.is_collect_shop?"shop_focus_active":"shop_focus","size_12"],on:{click:function(s){t.collectHandle(i.user_id,i.is_collect_shop)}}},[1!==i.is_collect_shop?e("i",{staticClass:"iconfont icon-shop-guanzhu size_12"}):t._e(),t._v(t._s(1==i.is_collect_shop?t.$t("lang.followed"):t.$t("lang.attention"))+"\n          ")])])]),i.goods.length>0?[e("section",{staticClass:"shop_pic"},[e("swiper",{attrs:{options:t.swiperOption}},t._l(i.goods,function(i,o){return e("swiper-slide",{key:o,staticClass:"product_list_item"},[e("router-link",{attrs:{to:{name:"goods",params:{id:i.goods_id}}}},[e("div",{staticClass:"goods_img_box"},[i.goods_thumb?e("img",{staticClass:"product-list-img",attrs:{src:i.goods_thumb}}):e("img",{staticClass:"product-list-img",attrs:{src:s("d9e6"),alt:""}})]),e("div",{staticClass:"goods_name_price"},[e("p",{staticClass:"size_14 color_333 text_1"},[t._v(t._s(i.goods_name))]),e("p",{staticClass:"size_14 color_FD001C text_1 weight_700",domProps:{innerHTML:t._s(i.shop_price)}})])])],1)}))],1)]:t._e()],2)}),t.footerCont?e("div",{staticClass:"footer-cont"},[t._v(t._s(t.$t("lang.no_more")))]):t._e()],2),t.loading?[e("van-loading",{attrs:{type:"spinner",color:"black"}})]:t._e(),e("Region",{attrs:{display:t.regionShow,isLevel:4,regionOptionDate:t.regionOptionDate},on:{updateDisplay:t.getRegionShow,updateRegionDate:t.getRegionOptionDate}})],2)},a=[],n=(s("ac6a"),s("55dd"),s("c5f6"),s("9395")),c=(s("d49c"),s("5487")),r=s("88d8"),l=(s("e7e5"),s("d399")),h=(s("ac1e"),s("543e")),d=(s("2994"),s("2bdd")),p=(s("7f7f"),s("e17f"),s("2241")),u=s("2f62"),_=s("7212"),f=s("3e7c"),g=s("a454"),v=s("09d6"),m=s("f27a"),w={mixins:[v["a"],m["a"]],data:function(){return{swiperOption:{notNextTick:!0,watchSlidesProgress:!0,watchSlidesVisibility:!0,slidesPerView:"auto",lazyLoading:!0},disabled:!1,loading:!0,shopScore:!1,size:10,page:1,cat_id:0,sort:"sort_order",order:"ASC",lat:"",lng:"",footerCont:!1,keyword:""}},components:(e={swiper:_["swiper"],swiperSlide:_["swiperSlide"],ShopHeader:f["a"]},Object(r["a"])(e,p["a"].name,p["a"]),Object(r["a"])(e,d["a"].name,d["a"]),Object(r["a"])(e,h["a"].name,h["a"]),Object(r["a"])(e,l["a"].name,l["a"]),e),directives:{WaterfallLower:Object(c["a"])("lower"),WaterfallUpper:Object(c["a"])("upper")},created:function(){var t=this;t.$store.dispatch("setShopCatList"),this.isWeixinBrowser?wx.getLocation({type:"wgs84",success:function(i){t.lat=i.latitude,t.lng=i.longitude,t.shopListLoad()}}):t.shopListLoad()},computed:Object(n["a"])({},Object(u["c"])({shopCatList:function(t){return t.shop.shopCatList}}),{shopList:{get:function(){return this.$store.state.shop.shopList},set:function(t){this.$store.state.shop.shopList=t}},isLogin:function(){return null!=localStorage.getItem("token")},shopCollectStatue:function(){return this.$store.state.user.shopCollectStatue},isWeixinBrowser:function(){return v["a"].isWeixinBrowser()}}),methods:{shopListLoad:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t&&(this.page=t,this.size=10*Number(t)),this.$store.dispatch("setShopList",{cat_id:this.cat_id,warehouse_id:0,area_id:0,size:this.size,page:this.page,sort:this.sort,order:this.order,lat:this.lat,lng:this.lng,city_id:this.regionOptionDate.city.id,keywords:i})},searchTheStore:function(){this.keyword.trim().length>0?this.shopListLoad(1,this.keyword):Object(l["a"])(this.$t("lang.shop_name_not_null"))},shopCatClick:function(t){this.cat_id=t,this.shopListLoad()},filterHandle:function(t){var i=this;"hot"==t?(this.order="ASC"==this.order?"DESC":"ASC",this.sort="sort",this.shopListLoad()):"region"==t?(this.handelRegionShow(),this.order="ASC",this.sort=""):"distance"==t?(this.order="ASC"==this.order?"DESC":"ASC",this.sort="distance",this.shopListLoad()):this.$store.dispatch("setShopMap",{lat:this.lat,lng:this.lng}).then(function(t){"success"==t.status?window.location.href=t.data:Object(l["a"])(i.$t("lang.locate_failure"))})},handelRegionShow:function(){this.regionShow=!this.regionShow},loadMores:function(){var t=this;setTimeout(function(){t.disabled=!0,t.page*t.size==t.shopList.length&&(t.page++,t.shopListLoad())},200)},shopDetail:function(t){this.$router.push({name:"shopHome",params:{id:t}})},collectHandle:function(t,i){if(this.isLogin)this.$store.dispatch("setCollectShop",{ru_id:t,status:i});else{var s=this.$t("lang.fill_in_user_collect_goods");this.notLogin(s)}},notLogin:function(t){var i=this;p["a"].confirm({message:t,className:"text-center"}).then(function(){i.$router.push({path:"/login",query:{redirect:{name:"integration",query:{type:1}}}})}).catch(function(){})},showPosition:function(t){var i=this;i.lat=t.coords.latitude,i.lng=t.coords.longitude,this.shopListLoad()},showErr:function(t){var i=this;i.lat=31.23037,i.lng=121.4737,this.shopListLoad()},shippingFee:function(t){this.$store.dispatch("setShippingFee",{goods_id:0,position:t})}},watch:{shopList:function(){this.page*this.size==this.shopList.length?(this.disabled=!1,this.loading=!0):(this.loading=!1,this.footerCont=this.page>1),this.shopList=g["a"].trimSpace(this.shopList)},shopCollectStatue:function(){var t=this;this.shopCollectStatue.forEach(function(i){t.shopList.forEach(function(t){t.user_id==i.id&&(t.is_collect_shop=i.status,t.count_gaze=1==i.status?t.count_gaze+1:t.count_gaze-1)})})},regionShow:function(){this.regionShow||this.shopListLoad()},regionSplic:function(){var t={province_id:this.regionOptionDate.province.id,city_id:this.regionOptionDate.city.id,district_id:this.regionOptionDate.district.id,street_id:this.regionOptionDate.street.id};this.shippingFee(t)},order:function(){}}},C=w,b=(s("f6d0"),s("2877")),x=Object(b["a"])(C,o,a,!1,null,"22bec886",null);x.options.__file="Index.vue";i["default"]=x.exports},f6d0:function(t,i,s){"use strict";var e=s("5455"),o=s.n(e);o.a}}]);