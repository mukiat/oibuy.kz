(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1307"],{"0a85":function(t,i,e){},2662:function(t,i,e){},2868:function(t,i,e){"use strict";e.r(i);var s,a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{directives:[{name:"waterfall-lower",rawName:"v-waterfall-lower",value:t.loadMore,expression:"loadMore"}],staticClass:"con",attrs:{"waterfall-disabled":"disabled","waterfall-offset":"300"}},[e("div",{staticClass:"header-list-goods"},[e("Search",{attrs:{mode:t.mode,isFilter:t.isFilter,app:t.app},on:{getViewSwitch:t.handleViewSwitch}}),e("FilterTab",{attrs:{filter:t.filter,isPopupVisible:t.isPopupVisible},on:{getFilter:t.handleFilter,setPopupVisible:t.setPopupVisible}})],1),e("section",{staticClass:"product-list",class:{"product-list-medium":"medium"===t.mode}},[t.cateGoodsList?e("ProductList",{attrs:{data:t.cateGoodsList,routerName:t.routerName}}):t._e(),t.footerCont?e("div",{staticClass:"footer-cont"},[t._v(t._s(t.$t("lang.no_more")))]):t._e(),t.loading?[e("van-loading",{attrs:{type:"spinner",color:"black"}})]:t._e()],2),e("CommonNav"),e("van-popup",{staticClass:"show-popup-right show-popup-filter",attrs:{position:"right"},model:{value:t.isPopupVisible,callback:function(i){t.isPopupVisible=i},expression:"isPopupVisible"}},[e("div",{staticClass:"top"},[e("div",{staticClass:"section"},[e("div",{staticClass:"title"},[e("span",[t._v("价格区间")])]),e("div",{staticClass:"section-warp price-filter"},[e("div",{staticClass:"input"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.min,expression:"filter.min"}],attrs:{type:"tel",placeholder:t.$t("lang.minimum_price")},domProps:{value:t.filter.min},on:{input:function(i){i.target.composing||t.$set(t.filter,"min",i.target.value)}}})]),e("span",{staticClass:"hang"}),e("div",{staticClass:"input"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.max,expression:"filter.max"}],attrs:{type:"tel",placeholder:t.$t("lang.top_price")},domProps:{value:t.filter.max},on:{input:function(i){i.target.composing||t.$set(t.filter,"max",i.target.value)}}})])]),e("div",{staticClass:"section-warp select-tabs"},t._l(t.grade,function(i,s){return e("div",{key:s,staticClass:"select-list",class:{active:i.sn==t.price_filter_sn},on:{click:function(e){t.onPriceFilter(i)}}},[e("span",{domProps:{innerHTML:t._s(i.price_range)}})])}))]),t.filter.brandResult.length>0?e("div",{staticClass:"section"},[e("div",{staticClass:"title"},[e("span",[t._v("品牌")]),e("div",{staticClass:"right-icon",on:{click:function(i){t.isPopupBrand=!t.isPopupBrand}}},[t.filter.brandResult.length>9?e("i",{staticClass:"iconfont",class:[t.isPopupBrand?"icon-less":"icon-moreunfold"]}):t._e()])]),e("div",{staticClass:"section-warp select-tabs"},t._l(t.filter.brandResult,function(i,s){return e("div",{directives:[{name:"show",rawName:"v-show",value:s<9||t.isPopupBrand,expression:"index < 9 || isPopupBrand"}],key:s,staticClass:"select-list",class:{active:t.filter.brandResultArr.includes(i)},on:{click:function(e){t.onBrandResult(i)}}},[e("span",[t._v(t._s(i.brand_name))])])}))]):t._e(),t._l(t.attribute,function(i,s){return e("div",{key:s,staticClass:"section"},[e("div",{staticClass:"title"},[e("span",[t._v(t._s(i.filter_attr_name))]),e("div",{staticClass:"right-icon",on:{click:function(e){t.isAttribute(i.filter_attr_id)}}},[e("i",{staticClass:"iconfont",class:[t.attribute_id.includes(i.filter_attr_id)?"icon-moreunfold":"icon-less"]})])]),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.attribute_id.includes(i.filter_attr_id),expression:"!attribute_id.includes(item.filter_attr_id)"}],staticClass:"section-warp select-tabs"},t._l(i.attr_list,function(i,a){return e("div",{key:a,staticClass:"select-list",class:{active:t.filter.filter_attr[s]==i.goods_attr_id},on:{click:function(e){t.onAttributeValue(i,s)}}},[e("span",[t._v(t._s(i.attr_value))])])}))])})],2),e("div",{staticClass:"footer"},[e("div",{staticClass:"btn-bar"},[e("div",{staticClass:"btn btn-lg-white",on:{click:t.closeFilter}},[t._v(t._s(t.$t("lang.merchants_reset")))]),e("div",{staticClass:"btn btn-lg-red",on:{click:t.submitFilter}},[t._v(t._s(t.$t("lang.confirm")))])])])]),e("DscLoading",{attrs:{dscLoading:t.dscLoading}}),e("ec-filter-top",{attrs:{scrollState:t.scrollState,outerClass:"true"}})],1)},n=[],o=(e("6762"),e("2fdb"),e("ac4d"),e("8a81"),e("ac6a"),e("55dd"),e("c5f6"),e("96cf"),e("cb0c")),r=e("88d8"),c=(e("ac1e"),e("543e")),l=(e("a909"),e("3acc")),u=(e("3c32"),e("417e")),d=(e("0653"),e("34e9")),f=(e("c194"),e("7744")),p=(e("b000"),e("1a23")),h=(e("8a58"),e("e41f")),m=(e("7f7f"),e("be7f"),e("565f")),v=(e("d49c"),e("5487")),g=e("4328"),_=e.n(g),b=(e("2f62"),e("7212")),w=e("c106"),C=e("4ee6"),y=e("1c14"),L=e("d567"),x=e("a454"),k=e("42d1"),P=e("e753"),$={data:function(){return{disabled:!1,loading:!0,mode:"",filter:{sort:"goods_id",order:"desc",goods_num:"0",promote:"0",min:"",max:"",brand_id:[],brandResult:[],brandResultArr:[],self:"0",intro:"",filter_attr:[]},isFilter:!0,isPopupVisible:!1,isPopupBrand:!1,swiperOption:{direction:"vertical",slidesPerView:"auto",freeMode:!0},routerName:"goods",cat_id:this.$route.params.id,page:1,size:10,footerCont:!1,dscLoading:!0,app:!1,scrollState:!1,grade:[],attribute:[],attribute_id:[],price_filter_sn:null}},directives:{WaterfallLower:Object(v["a"])("lower")},components:(s={Search:w["a"],FilterTab:C["a"],ProductList:y["a"],swiper:b["swiper"],swiperSlide:b["swiperSlide"],CommonNav:L["a"],DscLoading:k["a"]},Object(r["a"])(s,m["a"].name,m["a"]),Object(r["a"])(s,h["a"].name,h["a"]),Object(r["a"])(s,p["a"].name,p["a"]),Object(r["a"])(s,f["a"].name,f["a"]),Object(r["a"])(s,d["a"].name,d["a"]),Object(r["a"])(s,u["a"].name,u["a"]),Object(r["a"])(s,l["a"].name,l["a"]),Object(r["a"])(s,c["a"].name,c["a"]),Object(r["a"])(s,"EcFilterTop",P["a"]),s),mounted:function(){var t=this;this.$nextTick(function(){window.addEventListener("scroll",t.onScroll)})},created:function(){var t=this;t.getGoodsList(),setTimeout(function(){uni.getEnv(function(i){(i.plus||i.miniprogram)&&(t.app=!0)})},100),sessionStorage.getItem("configData")?t.mode=1==JSON.parse(sessionStorage.getItem("configData")).show_order_type?"small":"medium":t.shopConfig(),t.selectBrand()},computed:{cateGoodsList:{get:function(){return this.$store.state.category.cateGoodsList},set:function(t){this.$store.state.category.cateGoodsList=t}},checkedSelf:{get:function(){return"0"!=this.filter.self},set:function(t){this.filter.self=1==t?1:0}}},methods:{shopConfig:function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(){var i,e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$http.get("".concat(window.ROOT_URL,"api/shop/config"));case 2:i=t.sent,e=i.data.data,this.mode=1==e.show_order_type?"small":"medium";case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),getGoodsList:function(t){t&&(this.page=t,this.size=10*Number(t)),1==this.filter.promote?this.filter.intro="promote":this.filter.intro="",this.$store.dispatch("setGoodsList",{cat_id:this.cat_id,brand:this.filter.brand_id,warehouse_id:"0",area_id:"0",min:this.filter.min,max:this.filter.max,filter_attr:this.filter.filter_attr,ext:"",goods_num:this.filter.goods_num,size:this.size,page:this.page,sort:this.filter.sort,order:this.filter.order,self:this.filter.self,intro:this.filter.intro})},handleViewSwitch:function(t){this.mode=t},handleFilter:function(t){this.filter.sort=t.sort,this.filter.order=t.order,this.getGoodsList(1)},setPopupVisible:function(t){var i=this;this.isPopupVisible=t,this.isPopupVisible&&(this.$http.get("".concat(window.ROOT_URL,"/api/catalog/grade"),{params:{cat_id:this.cat_id}}).then(function(t){"success"==t.data.status&&(i.grade=t.data.data)}),this.$http.get("".concat(window.ROOT_URL,"/api/catalog/attribute"),{params:{cat_id:this.cat_id}}).then(function(t){if("success"==t.data.status){i.attribute=t.data.data;var e=!0,s=!1,a=void 0;try{for(var n,o=i.attribute[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){n.value;i.filter.filter_attr.push(0)}}catch(t){s=!0,a=t}finally{try{e||null==o.return||o.return()}finally{if(s)throw a}}}}))},selectBrand:function(){var t=this;this.$http.post("".concat(window.ROOT_URL,"api/catalog/brandlist"),_.a.stringify({cat_id:this.cat_id})).then(function(i){i.data.data.length>0&&(t.filter.brandResult=i.data.data)})},closeFilter:function(){this.filter.self="0",this.filter.goods_num="0",this.filter.promote="0",this.filter.min="",this.filter.max="",this.filter.brand_id=[],this.filter.brandResultArr=[],this.filter.filter_attr=[],this.price_filter_sn=null,this.getGoodsList(1)},submitFilter:function(){this.getGoodsList(1),this.isPopupVisible=!1},handleTags:function(t){"hasgoods"==t?this.filter.goods_num=0==this.filter.goods_num?1:0:this.filter.promote=0==this.filter.promote?1:0},onBrandResult:function(t){this.filter.brandResultArr.includes(t)?this.filter.brandResultArr.splice(this.filter.brandResultArr.indexOf(t),1):this.filter.brandResultArr.push(t),this.filter.brand_id=this.filter.brandResultArr.map(function(t){return t.brand_id})},loadMore:function(){var t=this;setTimeout(function(){t.disabled=!0,t.page*t.size==t.cateGoodsList.length&&(t.page++,t.getGoodsList())},200)},onScroll:function(){var t=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop;this.scrollState=t>800},isAttribute:function(t){this.attribute_id.includes(t)?this.attribute_id.splice(this.attribute_id.indexOf(t),1):this.attribute_id.push(t)},onPriceFilter:function(t){this.price_filter_sn=t.sn,this.filter.min=t.start,this.filter.max=t.end},onAttributeValue:function(t,i){this.filter.filter_attr.splice(i,1,t.goods_attr_id)}},destroyed:function(){window.removeEventListener("scroll",this.onScroll)},watch:{cateGoodsList:function(){this.dscLoading=!1,this.page*this.size==this.cateGoodsList.length?(this.disabled=!1,this.loading=!0):(this.loading=!1,this.footerCont=this.page>1),this.cateGoodsList=x["a"].trimSpace(this.cateGoodsList)}}},O=$,T=(e("ee6f"),e("2877")),S=Object(T["a"])(O,a,n,!1,null,null,null);S.options.__file="List.vue";i["default"]=S.exports},"2d1d":function(t,i,e){},"42d1":function(t,i,e){"use strict";var s=function(){var t=this,i=t.$createElement,e=t._self._c||i;return t.dscLoading?e("div",{staticClass:"cloading",style:{height:t.clientHeight+"px"},on:{touchmove:function(t){t.preventDefault()},mousewheel:function(t){t.preventDefault()}}},[e("div",{staticClass:"cloading-mask"}),t._t("text",[t._m(0)])],2):t._e()},a=[function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"cloading-main"},[s("img",{attrs:{src:e("f8b2")}})])}],n=e("88d8"),o=(e("7f7f"),e("ac1e"),e("543e")),r={props:["dscLoading"],data:function(){return{clientHeight:""}},components:Object(n["a"])({},o["a"].name,o["a"]),created:function(){},mounted:function(){this.clientHeight=document.documentElement.clientHeight},methods:{}},c=r,l=(e("a637"),e("2877")),u=Object(l["a"])(c,s,a,!1,null,"9a0469b6",null);u.options.__file="DscLoading.vue";i["a"]=u.exports},"45a6":function(t,i,e){"use strict";var s=e("2d1d"),a=e.n(s);a.a},"6fd6":function(t,i,e){},a637:function(t,i,e){"use strict";var s=e("2662"),a=e.n(s);a.a},c1ee:function(t,i,e){"use strict";var s=e("6fd6"),a=e.n(s);a.a},d567:function(t,i,e){"use strict";var s=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"sus-nav"},[e("div",{staticClass:"common-nav",class:{active:!0===t.navType},attrs:{id:"moveDiv"},on:{touchstart:t.down,touchmove:t.move,touchend:t.end}},[e("div",{staticClass:"right-cont",attrs:{id:"rightDiv"}},[e("ul",[e("li",{on:{click:function(i){t.routerLink("home")}}},[e("i",{staticClass:"iconfont icon-zhuye"}),e("p",[t._v(t._s(t.$t("lang.home")))])]),"drp"!=t.routerName&&"crowd_funding"!=t.routerName&&"team"!=t.routerName&&"supplier"!=t.routerName&&"presale"!=t.routerName?e("li",{on:{click:function(i){t.routerLink("search")}}},[e("i",{staticClass:"iconfont icon-search"}),e("p",[t._v(t._s(t.$t("lang.search")))])]):t._e(),e("li",{on:{click:function(i){t.routerLink("catalog")}}},[e("i",{staticClass:"iconfont icon-menu"}),e("p",[t._v(t._s(t.$t("lang.category")))])]),e("li",{on:{click:function(i){t.routerLink("cart")}}},[e("i",{staticClass:"iconfont icon-cart"}),e("p",[t._v(t._s(t.$t("lang.cart")))])]),e("li",{on:{click:function(i){t.routerLink("user")}}},[e("i",{staticClass:"iconfont icon-gerenzhongxin"}),e("p",[t._v(t._s(t.$t("lang.personal_center")))])]),"team"==t.routerName?e("li",{on:{click:function(i){t.routerLink("team")}}},[e("i",{staticClass:"iconfont icon-wodetuandui"}),e("p",[t._v(t._s(t.$t("lang.my_team")))])]):t._e(),"supplier"==t.routerName?e("li",{on:{click:function(i){t.routerLink("supplier")}}},[e("i",{staticClass:"iconfont icon-wodetuandui"}),e("p",[t._v(t._s(t.$t("lang.suppliers")))])]):t._e(),t._t("aloneNav")],2)]),e("div",{staticClass:"nav-icon",on:{click:t.handelNav}},[t._v(t._s(t.$t("lang.quick_navigation")))])]),e("div",{staticClass:"common-show",class:{active:!0===t.navType},on:{click:function(i){return i.stopPropagation(),t.handelShow(i)}}})])},a=[],n=(e("3846"),{props:["routerName"],data:function(){return{navType:!1,flags:!1,position:{x:0,y:0},nx:"",ny:"",dx:"",dy:"",xPum:"",yPum:""}},mounted:function(){this.flags=!1},methods:{handelNav:function(){this.navType=1!=this.navType},handelShow:function(){this.navType=!1},down:function(t){var i;this.flags=!0,i=t.touches?t.touches[0]:t,this.position.x=i.clientX,this.position.y=i.clientY,this.dx=moveDiv.offsetLeft,this.dy=moveDiv.offsetTop},move:function(t){var i,e,s,a;(t.preventDefault(),this.flags)&&(i=t.touches?t.touches[0]:t,e=document.documentElement.clientHeight,s=moveDiv.clientHeight,this.nx=i.clientX-this.position.x,this.ny=i.clientY-this.position.y,this.xPum=this.dx+this.nx,this.yPum=this.dy+this.ny,this.navType?this.yPum>0&&(a=e-s-this.yPum>0?e-s-this.yPum:0):(s+=rightDiv.clientHeight,this.yPum-s>0&&(a=e-this.yPum>0?e-this.yPum:0)),moveDiv.style.bottom=a+"px")},end:function(){this.flags=!1},routerLink:function(t){var i=this;"home"==t||"catalog"==t||"search"==t||"user"==t?setTimeout(function(){uni.getEnv(function(e){e.plus||e.miniprogram?"home"==t?uni.reLaunch({url:"../../pages/index/index"}):"catalog"==t?uni.reLaunch({url:"../../pages/category/category"}):"search"==t?uni.reLaunch({url:"../../pages/search/search"}):"user"==t&&uni.reLaunch({url:"../../pages/user/user"}):"search"==t?i.$router.push({name:"search"}):i.$router.push({name:t})})},100):i.$router.push({name:t})}}}),o=n,r=(e("c1ee"),e("2877")),c=Object(r["a"])(o,s,a,!1,null,null,null);c.options.__file="CommonNav.vue";i["a"]=c.exports},e753:function(t,i,e){"use strict";var s=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{directives:[{name:"show",rawName:"v-show",value:t.scrollState,expression:"scrollState"}],staticClass:"commom-nav",class:{"commom-nav-outer":t.outerClass},attrs:{id:"commom-nav"},on:{click:t.backTop}},[e("i",{staticClass:"iconfont icon-dingbu"})])},a=[],n={name:"filter-top",props:{scrollState:{type:Boolean,default:!1},outerClass:{type:String,default:""}},methods:{backTop:function(){document.body.scrollTop=0,document.documentElement.scrollTop=0}}},o=n,r=(e("45a6"),e("2877")),c=Object(r["a"])(o,s,a,!1,null,"19bc0d9c",null);c.options.__file="FilterTop.vue";i["a"]=c.exports},ee6f:function(t,i,e){"use strict";var s=e("0a85"),a=e.n(s);a.a},f8b2:function(t,i,e){t.exports=e.p+"img/loading.gif"}}]);